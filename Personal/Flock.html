<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Flock Simulation | Marcin Czekaj</title>
    <link rel="stylesheet" href="../style.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" /></head>
<body>

<header class="project-header">
    <h1>Flock Simulation </h1>
    <p class="project-subtitle">
		Real-time flocking simulation implemented in both CPU and fully GPU-driven versions.
    </p>
    <a class="back-link" href="../index.html">Back to Portfolio</a>
</header>

<main class="project-container">

<!-- ================= OVERVIEW ================= -->
<section>
    <h2>Overview</h2>
    <p>

    </p>
	
	<div class="project-links">

		<!-- GitHub Repository -->
		<a href="https://github.com/famousghost/FlockSimulation"
		   target="_blank"
		   class="project-button">
			<i class="fab fa-github"></i>
			Github
		</a>
	</div>


    <div class="project-meta">
        <div><strong>Type:</strong> Personal </div>
        <div><strong>Technologies:</strong> C#, Unity built-in, Compute Shaders</div>
    </div>
</section>

<section>
	<h2>Overview</h2>
    <p>
		Real-time flocking simulation implemented in both CPU and fully GPU-driven versions.
		The project explores scalability, spatial partitioning techniques, and minimizing CPU-GPU synchronization.
    </p>

	<h2>Core Features</h2>
	<ul>
		<li>Boids-based flocking simulation (alignment, cohesion, separation).</li>
		<li>CPU implementation with Octree spatial partitioning.</li>
		<li>Fully GPU-driven implementation using Compute Shaders.</li>
		<li>Obstacle avoidance using multi-ray sampling per agent.</li>
		<li>Indirect rendering with GPU instancing.</li>
	</ul>

	<h2>CPU Implementation</h2>
	<p>
		The CPU version includes an optimized spatial partitioning structure (Octree)
		to reduce neighbor search complexity. While effective for sparse distributions,
		performance degrades under high-density clustering due to increased spatial subdivision.
	</p>

	<p>
		Obstacle avoidance is implemented via multi-ray sampling. Each boid casts
		several hundred rays forward, computing an averaged collision response vector
		to determine safe steering direction. This stage represents the most computationally expensive
		part of the CPU pipeline.
	</p>

	<h2>GPU Implementation</h2>
	<ul>
		<li>Compute Shader-based simulation update.</li>
		<li>StructuredBuffer used for boid data storage.</li>
		<li>Vertex Shader reads simulation data directly via GPU instancing.</li>
		<li>Indirect rendering for fully GPU-driven execution.</li>
	</ul>

	<p>
		The optimized version eliminates continuous CPU-GPU communication.
		The CPU is responsible only for initial data upload. All simulation updates,
		obstacle avoidance calculations, and buffer management are handled entirely on the GPU.
	</p>

	<h2>Synchronization Modes</h2>
	<ul>
		<li>CPU (with and without Octree)</li>
		<li>GPU Sync (CPU reads back GPU data)</li>
		<li>GPU Async</li>
		<li>Full GPU (Indirect Rendering, no readback)</li>
	</ul>

	<h2>Performance Benchmarks</h2>
	<ul>
		<li>256 agents – CPU vs GPU comparison</li>
		<li>512 agents – CPU vs GPU comparison</li>
		<li>1024 agents – CPU vs GPU comparison</li>
		<li>2048 agents – GPU only</li>
		<li>16,000 agents – GPU Async</li>
		<li>16,000 agents – Full GPU (Indirect Rendering)</li>
	</ul>


<section>
    <h2>Video</h2>
	<div class="video-container">
	
    <video controls width="100%">
        <source src="../Assets/Personal/Videos/Flock/Flock8192.mp4" type="video/mp4">
        Flock 8192
    </video>
	
	<video controls width="100%">
        <source src="../Assets/Personal/Videos/Flock/Flock16384_FullGPU.mp4" type="video/mp4">
        Flock 16384 Full GPU
    </video>
	
	<video controls width="100%">
        <source src="../Assets/Personal/Videos/Flock/Flock16384_Async.mp4" type="video/mp4">
        Flock 16384 Full GPU
    </video>
	
	<video controls width="100%">
        <source src="../Assets/Personal/Videos/Flock/FlockCPU.mp4" type="video/mp4">
        Flock CPU
    </video>
	
	<video controls width="100%">
        <source src="../Assets/Personal/Videos/Flock/FlockOctree.mp4" type="video/mp4">
        Flock Octree
    </video>
	</div>

</section>

</main>

<footer>
    © 2026 Marcin Czekaj
</footer>

<div id="imageModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="fullImage">
</div>
<script src="../script.js"></script>


</body>
</html>